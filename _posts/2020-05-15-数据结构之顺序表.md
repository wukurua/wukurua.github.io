---
layout:     post
title:      数据结构之顺序表
subtitle:   顺序表
date:       2020-05-15
author:     wukurua
header-img: img/DS/post-bg-ds.jpg
catalog: true
tags:
    - Data Structure
---

SqList.h

```c++
#ifndef SQLIST_H
#define SQLIST_H
#include<iostream>
using namespace std;

const int initSize=5;

typedef struct
{
	int *data;
	int maxSize,length;
}SqList;

void listInit(SqList &L);
void listDoubleCapacity(SqList &L);
int listLength(SqList &L);
//返回查找到的e对应顺序表位序
int locateListElem(SqList &L,int e);
int getListElem(SqList &L,int i);
//前插,i为顺序表位序
bool listInsert(SqList &L,int i,int e);
bool listDelete(SqList &L,int i,int &e);
void listPrint(SqList &L);
bool listEmpty(SqList &L);
void listDestory(SqList &L);
void listReverse(SqList &L);//空间复杂度O(1)
//倒转顺序表m和n闭区间元素,m,n是数组下标
bool listReverseLR(SqList &L,int left,int right);
//删除顺序表L中所有值为e的元素(s<t)
bool listDelElm(SqList &L,int e);
//删除顺序表L中所有值在给定值s与t之间的元素(s<t)
bool listDelElmST(SqList &L,int s,int t);
//删除有序顺序表重复元素
bool listDelRepeatElm(SqList &L);
//合并两个有序顺序表A,B为一个新的有序顺序表L
void listMerge(SqList A,SqList B,SqList &L);
//将顺序表中的两个部分调换:(a1,a2,...,am),(b1,b2,...,bn)->(b1,b2,...,bn),(a1,a2,...,am)
void listExchange(SqList &L,int m,int n);

#endif
```

SqList.cpp

```c++
#include "SqList.h"

void listInit(SqList &L)
{
	L.maxSize=initSize;
	L.length=0;
	L.data=new int[initSize];
}

void listDoubleCapacity(SqList &L)
{
	int *tmp=L.data;
	int capacity=L.maxSize*2;
	L.data=new int[capacity];
	for(int i=0;i<L.maxSize;i++)
		L.data[i]=*(tmp+i);
	L.maxSize=capacity;
	cout<<"Now the capacity of SqList is "<<L.maxSize<<endl;
}

int listLength(SqList &L)
{
	return L.length;
}

int locateListElem(SqList &L,int e)
{
	for(int i=0;i<L.length;i++)
		if(L.data[i]==e)
			return i+1;
	return 0;
}

int getListElem(SqList &L,int i)
{
	return L.data[i+1];
}

bool listInsert(SqList &L,int i,int e)
{
	if(i<1||i>L.length+1)
		return false;
	if(L.length>=L.maxSize)
		listDoubleCapacity(L);
	for(int j=L.length;j>=i;j--)
		L.data[j]=L.data[j-1];
	L.data[i-1]=e;
	L.length++;
	return true;
}

bool listDelete(SqList &L,int i,int &e)
{
	if(i<1||i>L.length)
		return false;
	e=L.data[i-1];
	for(int j=i;j<L.length;j++)
		L.data[j-1]=L.data[j];
	L.length--;
	return true;
}

void listPrint(SqList &L)
{
	for(int i=0;i<L.length-1;i++)
		cout<<L.data[i]<<" ";
	cout<<L.data[L.length-1]<<endl;
}

bool listEmpty(SqList &L)
{
	if(L.length==0)
		return true;
	else
		return false;
}

void listDestory(SqList &L)
{
	delete L.data;
}

void listReverse(SqList &L)
{
	int tmp;
	for(int i=0;i<L.length/2;i++)
	{
		tmp=L.data[i];
		L.data[i]=L.data[L.length-i-1];
		L.data[L.length-i-1]=tmp;
	}
}

bool listReverseLR(SqList &L,int left,int right)
{
	if(left>=right||right>=L.length)
		return false;
	int tmp,mid=(left+right)/2;
	for(int i=0;i<=mid-left;i++)
	{
		tmp=L.data[left+i];
		L.data[left+i]=L.data[right-i];
		L.data[right-i]=tmp;
	}
	return true;
}

bool listDelElm(SqList &L,int e)
{
	int i,k=0;//k记录等于e的元素个数
	for(i=0;i<L.length;i++)
	{
		if(L.data[i]==e)
			k++;
		else
			L.data[i-k]=L.data[i];
	}
	L.length-=k;
	return true;
}

bool listDelElmST(SqList &L,int s,int t)
{
	if(s>=t||L.length==0)
		return false;
	int i,k=0;//k记录删去多少元素,要留出多少空位
	for(i=0;i<L.length;i++)
	{
		if(L.data[i]>=s&&L.data[i]<=t)
			k++;
		else
			L.data[i-k]=L.data[i];
	}
	L.length-=k;
	return true;
}

bool listDelRepeatElm(SqList &L)
{
	if(L.length==0)
		return false;
	int i,j;//i存储第一个不相同的元素
	for(i=0,j=1;j<L.length;j++)
	{
		if(L.data[i]!=L.data[j])
		{
			L.data[++i]=L.data[j];
		}
	}
	L.length=i+1;
	return true;
}

void listMerge(SqList A,SqList B,SqList &L)
{
	//首先,按顺序不断取下两个顺序表表头较小的结点存入新的顺序表
	//然后,看哪个表还有剩余就将剩下的部分加到新的顺序表后面
	while(A.length+B.length>L.maxSize)
	{
		listDoubleCapacity(L);
	}
	int i=0,j=0,k=0;
	while(i<A.length&&j<B.length)
	{
		if(A.data[i]<=B.data[j])
			L.data[k++]=A.data[i++];
		else
			L.data[k++]=B.data[j++];
	}
	while(i<A.length)
		L.data[k++]=A.data[i++];
	while(j<B.length)
		L.data[k++]=B.data[j++];
	L.length=k;
}

void listExchange(SqList &L,int m,int n)
{
	listReverseLR(L,0,m+n-1);
	listReverseLR(L,0,n-1);
	listReverseLR(L,n,m+n-1);
}
```

main.cpp

```c++
#include "SqList.h"
 
int main()
{
	SqList L;
	listInit(L);

	cout<<"isEmpty:"<<listEmpty(L)<<endl;

	cout<<"Insert:"<<endl;
	listInsert(L,1,5);
	listInsert(L,1,4);
	listInsert(L,1,3);
	listInsert(L,1,2);
	listInsert(L,1,1);
	listPrint(L);
	listInsert(L,6,6);
	listPrint(L);
	cout<<"length:"<<listLength(L)<<endl;
	cout<<"fourth:"<<getListElem(L,4)<<endl;
	cout<<"where is 5:"<<locateListElem(L,5)<<endl;

	int e=0;
	listDelete(L,6,e);
	cout<<"delete sixth:"<<e<<endl;	
	listPrint(L);

	cout<<"Reverse:"<<endl;
	listReverse(L);
	listPrint(L);

	cout<<"+2,Delete Element 2:"<<endl;
	listInsert(L,1,2);
	listDelElm(L,2);
	listPrint(L);

	cout<<"+4,Delete Element between 3 and 4:"<<endl;
	listDelElmST(L,3,4);
	listPrint(L);

	cout<<"+1,5,Delete Repeat Element:"<<endl;
	listInsert(L,1,5);
	listInsert(L,4,1);
	listPrint(L);
	listDelRepeatElm(L);
	listPrint(L);
	
	SqList M,NEW;
	listInit(M);
	listInit(NEW);
	listInsert(M,1,5);
	listInsert(M,1,5);
	listInsert(M,1,4);
	listInsert(M,1,4);
	listInsert(M,1,3);
	listInsert(M,1,3);
	listInsert(M,1,2);
	listInsert(M,1,1);
	listInsert(M,1,1);
	cout<<"M:"<<endl;
	listPrint(M);
	cout<<"L:"<<endl;
	listPrint(L);
	cout<<"Merge L and M:"<<endl;
	listMerge(M,L,NEW);
	listPrint(NEW);

	cout<<"Exchange L(m=7,n=4)"<<endl;
	listExchange(NEW,7,4);
	listPrint(NEW);

	listDestory(L);
	return 0;
}
```

控制台结果:

![](https://cdn.jsdelivr.net/gh/wukurua/cloudimg@master/img/20200519225457.png)

